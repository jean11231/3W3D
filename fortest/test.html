<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>gesture</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
 
<body>
    <div id="app">
     <img src="https://farm7.staticflickr.com/6175/6176698785_7dee72237e_b.jpg" alt="" class="box">
    </div>
    <script>
        var pageX, pageY, initX, initY, isTouch = false;
	var start = [];
	document.addEventListener("touchstart", function (e) {
	    pageX = e.targetTouches[0].pageX;
	    pageY = e.targetTouches[0].pageY;
	    initX = e.target.offsetLeft;
	    initY = e.target.offsetTop;
	    if (e.touches.length >= 2) {
	    start = e.touches;
	    alert('2-touch');
	    };
	    isTouch = true;
	    console.log(isTouch)
	    console.log(e.touches.length)
	}, false);
	document.addEventListener("touchmove", function (e) {
	    e.preventDefault();
	    if (e.touches.length == 1 && isTouch) {
		var touchMoveX = e.targetTouches[0].pageX,
		touchMoveY = e.targetTouches[0].pageY;
		e.target.style.left = parseInt(touchMoveX) - parseInt(pageX) + parseInt(initX) + "px";
		e.target.style.top = parseInt(touchMoveY) - parseInt(pageY) + parseInt(initY) + "px";
		console.log(e.target.style.left)
		console.log(e.target.style.top)
	    };
	    if (e.touches.length >= 2 && isTouch && e.scale < 2.5) {
	    console.log('22222');
	    alert('2-touch22222');
	    var now = e.touches;
	    var scale = (getDistance(now[0], now[1]) / getDistance(start[0], start[1]));
	    e.scale = scale.toFixed(2);
	    e.target.style.transform = "scale(" + scale + ")";
	    };
	 }, false);
	document.addEventListener("touchend", function (e) {
	    if (isTouch) {isTouch = false;}
	}, false);
	function getDistance(p1, p2) {
	    var x = p2.pageX - p1.pageX,
	    y = p2.pageY - p1.pageY;
	    return Math.sqrt((x * x) + (y * y));
	};
    </script>
</body>
</html>
